# Actions-OP

<img src="https://openwrt.org/lib/tpl/openwrt/images/logo.png" width="25%" />

Building your OpenWrt project using GitHub Actions

<br/>

> Template generated by P3TERX:  https://github.com/P3TERX/Actions-OpenWrt/ 
>
> And source code cloned from Lienol: https://github.com/Lienol/openwrt/
>
> Many thanks to their contribuction for providing great things



## Architecture

基础配置文件基于intel x64架构，提供grub和efi两种bios启动方式，固定root分区大小为300M

openwrt内核版本为19.07稳定版，luci版本使用17.01

目录：

- 支持使用ipv6，支持usb2.0/3.0的存储，网卡，声卡模式

- 文件系统支持包含exfat,ext4,f2fs,nfs,nfs-v3,nfs-v4,squashfs,vfat,fuse,不支持ntfs(只读)

- 集成snmpd, ttyd等控件，并加入了**docker**框架及管理页面方便构建私有容器

- 有线网卡驱动按需选择，基础配置文件只包含e1000,e1000e,igb和vmxnet3(ESXI,PVE虚拟网卡)，不包含无线网卡驱动集成

- luci主题增加argon, argon-light(green), argon-dark(purple), rosy等

- Luci-app: **ADH**, **Adbyby+**, Autoreboot, **Baidupcs-web**, CIFS-Server, **Dockerman**, Tcpdump(可视化抓包), DDNS(aliyun, cloudflare, dnspod), Filetransfer(方便安装.ipk), Fileassistant, **NPS**(替换frpc), KMS, MiniDLNA, Samba3, SFTP, **SmartDNS**, TurboAcc, **U-Netease-Music**

- **Passwall, **Zerotier**, VPN servers[trojan-server, v2ray-server, IPSec-server, Openconnect-server, OpenVPN-server, Softether-server]

- 一些命令行工具: curl, wget, gzip, tar, nano, screen, findutils, mountutils, **open-vm-tools**等

  

## Usage

- 注册并登陆你的Github账户

- 点击右上角 [Fork](https://github.com/digitcloud/Actions-OP/ ) 后会变成你的仓库

- 修改diy.sh和third_party.sh文件，增加你所需要的软件源，修改默认ip地址和登录密码，并可增加更多自定义内容

- 开始编译任务，点击右上角的 **Star** 按钮或上传你的 .config 文件覆盖原来的文件(建议基于这里的基础配置文件做修改，可以避免编译过程中不必要的出错)

  ```shell
  ##使用ubuntu进行源码编译生成配置文件的方法
  make defconfig
  ./scripts/diffconfig.sh > seed.config
  mv seed.config .config
  ```

- 编译进度可以在Actions相应的任务中查看，中间有个步骤需要ssh登录编译机，请**提前查看进度**才能弹出地址

- 在MENU做完增删改除后，待编译过程结束后(大约需要2.5小时)，可以在 `Artifacts` 中找到你编译好的固件，开启 [build-openwrt.yml](/.github/workflows/build-openwrt.yml) 里面的 `UPLOAD_COWTRANSFER` 和 `UPLOAD_WETRANSFER` 可同时将编译好的固件上传到 [cowtransfer](https://cowtransfer.com/) 和 [wetransfer](https://wetransfer.com/) 方便国内环境下载



------

- Sign up and sign in to your Github Account.
- Click the right up corner [Fork](https://github.com/digitcloud/Actions-OP/ ) to your repository.
- Edit the diy.sh file and third_party.sh file while you could add external source packages, modify default ip address or root password, and even more out of your imagine.
- Begin the compile task, by clicking the right up corner **Star** button or you could upload your predefined .config file (But suggest modifying params based on this config file to avoid unnecessary errors during compilation).
- The compilation progress could be found on corresponding task in the Action page. Meanwhile, a step of logging into the virtual machine requires you to look into the **progress before hand.**
- After you complete amending, wait the process about 2.5 hrs to run and later you would download your openwrt firmwares on `Artifacts`.
